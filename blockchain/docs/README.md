

# 实验四：Solidity 编程与智能合约入门

## 1. 实验目的

学习并掌握 Solidity 编程语言，理解 ERC-20 代币标准，并在以太坊虚拟机（EVM）上部署和测试智能合约 。

## 2. 核心原理

* **ERC-20 标准**: 包含 `balanceOf`（余额查询）、`transfer`（转账）、`approve`（授权）及 `transferFrom`（委托支出）等核心功能 。


* **事件 (Events)**: 包括 `Transfer` 和 `Approval`，用于记录区块链上的重大操作 。



## 3. 实验步骤

1. **编写合约代码**:
* 首先定义 `IERC20` 接口，声明标准函数逻辑 。


* 实现 `ERC20.sol` 主合约，并导入接口协议 。




2. **环境配置**:
* 打开 [Remix IDE](https://remix.ethereum.org/) 并导入合约文件 。




3. **编译与部署**:
* 在 Remix 中选择编译器版本进行代码编译 。


* 在 "Deploy & Run Transactions" 页面，选择 Remix VM 环境部署合约 。




4. **合约功能测试**:
* **Mint**: 铸造初始代币 。


* **Approve**: 授权指定地址一定的代币支出额度 。


* **Transfer/TransferFrom**: 测试个人转账及第三方委托转账功能 。





## 4. 实验体会

以太坊合约一旦部署便不可更改，所有交易步骤均按时间序列记录，具有高度的严谨性 。

---

# 实验五：空投合约原理与实现

## 1. 实验目的

利用智能合约实现 ERC-20 代币的批量分发（空投），提高分发效率 。

## 2. 核心算法逻辑

* **批量转账 (`multiTransferToken`)**:
* 接收代币地址、收款人数组及对应金额数组 。


* **长度校验**: 确保地址数组和金额数组长度一致 。


* **余额校验**: 计算空投总量，并检查合约是否有足够余额 。


* **循环发送**: 遍历地址数组，调用 `transfer` 执行转账 。




* **辅助函数 (`getSum`)**:
* 遍历金额数组并计算总和 。





## 3. 实验步骤

1. **开发空投合约**:
* 编写 `Airdrop` 合约，引入 `IERC20` 接口以便与代币合约交互 。




2. **编译合约**:
* 使用 Solidity `^0.8.4` 版本在 Remix 中进行编译 。




3. **部署测试**:
* 在 Remix VM (Cancun) 环境下部署合约 。


* 通过 `multiTransferToken` 函数输入测试地址列表和金额进行批量转账测试 。





## 4. 实验总结

通过空投合约，项目方可以显著提高向多个用户分发代币的效率，避免了逐个转账的繁琐操作 。

